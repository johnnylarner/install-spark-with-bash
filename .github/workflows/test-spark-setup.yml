name: Test Spark Setup
on:
  push:
    branches:
      - main

jobs:
  test-spark-setup:
    name: Test spark setup
    runs-on: 'ubuntu-latest'

    steps:
      - name: Checkout
        uses: actions/checkout@main

      - name: Check Python install
        run: |
          PY_VERSION=$(python3 --version)
          echo $PY_VERSION

      - name: Check Java install
        run: |
          JAR_VERSION=$(java -version)
          echo $JAR_VERSION

      - name: Install spark
        run: |
          echo 'Workspace: $GITHUB_WORKSPACE'
          IFS='/'
          read -a PATH_PARTS <<< "$GITHUB_WORKSPACE"
          echo "There are ${#PATH_PARTS[*]} words in the text."
          INSTALL_FOLDER=''
          for ((idx=1; idx<${#PATH_PARTS[@]}-1; ++idx)); do
              PATH_PART="${PATH_PARTS[idx]}"
              echo "$idx" "${PATH_PARTS[idx]}"

              if ! [   "$${PATH_PARTS[idx]}" = "home"  ];
              then 
                INSTALL_FOLDER+="/${PATH_PARTS[idx]}"
                echo "$INSTALL_FOLDER"
              fi
          done
